{"version":3,"file":"index.js","sources":["../src/utilities/helper.ts","../src/components/loading.tsx","../src/components/folder.tsx","../src/components/file.tsx","../src/components/image.tsx","../src/components/menu.tsx","../src/components/title.tsx","../src/components/renamemodal.tsx","../src/elements/lists.tsx","../src/elements/modaltitle.tsx","../src/index.tsx"],"sourcesContent":["export function GetFileNameFromLink(link: string) {\n  const fileName = link.split('/').pop()\n  return fileName\n}\nexport function IsImage(url: string) {\n  return /\\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(url)\n}\nexport const Actions = {\n  actions: {},\n  set(actions: any) {\n    this.actions = actions\n  },\n  get() {\n    return this.actions\n  }\n}\nexport function CopyToClipboard(value: any) {\n  const textArea = document.createElement('textarea')\n  textArea.value = value\n  document.body.appendChild(textArea)\n  textArea.select()\n  document.execCommand('copy')\n  textArea.remove()\n}\nexport function BeautifyData(responseData: any) {\n  const { status, data } = responseData\n  let lists = []\n  if (status) {\n    lists = data.map((list: any) => {\n      return {\n        ...list,\n        title: GetFileNameFromLink(list.link),\n        type: IsImage(list.link) ? 'image' : list.type\n      }\n    })\n  } else {\n    console.error(responseData)\n    throw Error('Failed to retrieve data')\n  }\n  return lists\n}\nexport function GetFileExtension(link: string) {\n  var doc = link.substring(link.lastIndexOf('/'))\n  return doc.substring(doc.lastIndexOf('.'))\n}\n","import { Spin } from 'antd'\nimport React from 'react'\n\nconst ContainerStyle = {\n  height: '200px',\n  width: '100%',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n}\nexport default function Loading() {\n  return (\n    <div style={ContainerStyle}>\n      <Spin size='large' />\n    </div>\n  )\n}\n","import React from 'react'\nimport { FolderFilled } from '@ant-design/icons'\n\nconst styles = {\n  fontSize: 50,\n  color: '#3399ff'\n}\nexport default function Folder() {\n  return <FolderFilled style={styles} className='fm-item-icon' />\n}\n","import React from 'react'\nimport { FileFilled } from '@ant-design/icons'\n\nconst styles = {\n  fontSize: 35,\n  color: '#fa7125'\n}\nexport default function File() {\n  return <FileFilled style={styles} className='fm-item-icon' />\n}\n","import { Image } from 'antd'\nimport React from 'react'\n\nconst imageStyle = {\n  borderRadius: '4px'\n}\nexport default function ImageFile({ src }: { src: string }) {\n  return (\n    <div>\n      <Image style={imageStyle} width={65} height={50} src={src} alt='' />\n    </div>\n  )\n}\n","import {\n  CopyOutlined,\n  EditOutlined,\n  MoreOutlined,\n  DeleteOutlined\n} from '@ant-design/icons'\nimport { Dropdown, Menu, message } from 'antd'\nimport React from 'react'\nimport styles from '../styles.module.css'\n// import { DeleteFileFolder } from '../utilities/apicalls'\nimport { Actions, CopyToClipboard } from '../utilities/helper'\n\nconst MenuOption = ({\n  type,\n  link,\n  showRenameModal\n}: {\n  type: string\n  link: string\n  showRenameModal: (data: any) => void\n}) => {\n  return (\n    <React.Fragment>\n      <Dropdown\n        overlay={() => <MenuItems {...{ type, link, showRenameModal }} />}\n        trigger={['click']}\n        placement='bottomRight'\n      >\n        <div className={styles.fmItemMenuIcon}>\n          <MoreOutlined />\n        </div>\n      </Dropdown>\n    </React.Fragment>\n  )\n}\nconst MenuItems = ({\n  type,\n  link,\n  showRenameModal\n}: {\n  type: string\n  link: string\n  showRenameModal: any\n}) => {\n  const { deletePath, onCopy }: any = Actions.get()\n  const lists = [\n    {\n      icon: <CopyOutlined />,\n      label: 'Copy',\n      key: 0\n    },\n    {\n      icon: <EditOutlined />,\n      label: 'Rename',\n      key: 1\n    },\n    {\n      icon: <DeleteOutlined />,\n      label: 'Delete',\n      key: 2\n    }\n  ]\n  if (type === 'folder') {\n    delete lists[0]\n  }\n  const onClick = async ({ key }: any) => {\n    if (Number(key) === 0) {\n      if (onCopy) {\n        onCopy(link)\n      }\n      CopyToClipboard(link)\n      message.info('Copied to clipboard')\n    }\n    if (Number(key) === 2) {\n      const confirmation = confirm('Are you sure you want to remove ?')\n      if (confirmation) {\n        await deletePath(link)\n      }\n    }\n    if (Number(key) === 1) {\n      showRenameModal()\n    }\n  }\n  return <Menu items={lists} onClick={onClick} />\n}\n\nexport default MenuOption\n","import React from 'react'\nimport { Typography } from 'antd'\nconst FileFolderTitle = ({ title }: { title: string }) => {\n  return (\n    <Typography.Paragraph\n      title={title}\n      ellipsis={{ rows: 1 }}\n      style={{\n        margin: 0,\n        height: 30,\n        padding: '4px 6px',\n        fontSize: 12,\n        lineHeight: '22px',\n        fontWeight: 500,\n        textAlign: 'center'\n      }}\n    >\n      {title}\n    </Typography.Paragraph>\n  )\n}\n\nexport default FileFolderTitle\n","import { Input, Modal } from 'antd'\nimport React, { useRef, useState } from 'react'\nimport { Actions, GetFileExtension } from '../utilities/helper'\n\nconst RenameModal = ({\n  details,\n  setRenameDetails\n}: {\n  details: any\n  setRenameDetails: any\n}) => {\n  const inputRef: any = useRef(null)\n  const { renamePath }: any = Actions.get()\n  const { _show, data } = details\n  const { type, title, link } = data\n  const ext = type === 'image' || type === 'file' ? GetFileExtension(title) : ''\n  const fileName = data?.title.replace(ext, '')\n  const [confirmLoading, setConfirmLoading] = useState(false)\n  const handleOk = async () => {\n    const confirmation = confirm('Are you sure you want to rename ?')\n    if (!confirmation) return\n    setConfirmLoading(true)\n    await renamePath(link, `${inputRef.current}${ext}`)\n    setRenameDetails({ _show: false, data: {} })\n    setConfirmLoading(false)\n  }\n\n  const handleCancel = () => {\n    setRenameDetails({ _show: false, data: {} })\n  }\n\n  return (\n    <Modal\n      title='Rename'\n      visible={_show}\n      onOk={handleOk}\n      confirmLoading={confirmLoading}\n      onCancel={handleCancel}\n    >\n      <Input\n        addonAfter={ext}\n        defaultValue={fileName}\n        autoFocus\n        onChange={(e) => (inputRef.current = e.currentTarget.value)}\n      />\n    </Modal>\n  )\n}\n\nexport default RenameModal\n","import React, { useState } from 'react'\nimport { List } from 'antd'\nimport {\n  File,\n  FileFolderTitle,\n  Folder,\n  ImageFile,\n  MenuOption,\n  RenameModal\n} from '../components'\n// eslint-disable-next-line no-unused-vars\nimport { listType } from '../types'\nimport styles from '../styles.module.css'\n\ninterface ListProps {\n  data: listType[]\n  updateBreadBumbIndex: (title: string, link: string) => void\n}\nexport default function Lists({ data, updateBreadBumbIndex }: ListProps) {\n  const [renameDetails, setRenameDetails] = useState<{\n    _show: boolean\n    data: {\n      title?: string\n      link?: string\n      type?: string\n    }\n  }>({\n    _show: false,\n    data: {}\n  })\n  function showRenameModal(data: any) {\n    setRenameDetails({ _show: true, data })\n  }\n  return (\n    <React.Fragment>\n      <List\n        grid={{\n          gutter: 16,\n          xs: 3,\n          sm: 4,\n          md: 5,\n          lg: 6,\n          xl: 8,\n          xxl: 9\n        }}\n        dataSource={data}\n        renderItem={({ type, title, link }: any) => (\n          <List.Item>\n            <div className={styles.fmItem}>\n              <div className={styles.fmItemContainer}>\n                {type === 'folder' ? (\n                  <span\n                    onClick={() => updateBreadBumbIndex(title, link)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    <Folder />\n                  </span>\n                ) : type === 'file' ? (\n                  <File />\n                ) : (\n                  <div>\n                    <ImageFile src={link} />\n                  </div>\n                )}\n              </div>\n              <MenuOption\n                {...{ type, link }}\n                showRenameModal={() => showRenameModal({ type, title, link })}\n              />\n              <FileFolderTitle {...{ title }} />\n            </div>\n          </List.Item>\n        )}\n      />\n      {renameDetails?._show ? (\n        <RenameModal\n          details={renameDetails}\n          key={`${renameDetails?._show}-rename-modal`}\n          setRenameDetails={setRenameDetails}\n        />\n      ) : (\n        <React.Fragment />\n      )}\n    </React.Fragment>\n  )\n}\n","import { Breadcrumb, Button } from 'antd'\nimport React, { useRef } from 'react'\nimport { PlusSquareOutlined, UploadOutlined } from '@ant-design/icons'\n// eslint-disable-next-line no-unused-vars\nimport { BreadCumbType, CreateType } from '../types'\nimport { Actions } from '../utilities/helper'\n\ninterface ModalTitleProps {\n  breadCumbLists: BreadCumbType[]\n  toggleBreadCumbIndex: (index: number) => void\n}\nconst ModalTitle = ({\n  toggleBreadCumbIndex,\n  breadCumbLists\n}: ModalTitleProps) => {\n  const selectInputRef: any = useRef(null)\n  const { create }: any = Actions.get()\n\n  const handleChangeFile = async (event: any) => {\n    const link = breadCumbLists[breadCumbLists.length - 1].link\n    const file = event.target.files[0]\n    const fileExtension = file?.type.split('/')[1]\n    const payload: CreateType = {\n      name: file?.name.replace('.' + fileExtension, ''),\n      type: 'FILE',\n      location: link,\n      file: file\n    }\n    const response = await create(payload)\n    if (response?.status) {\n      alert('File Successfully uploaded')\n    } else {\n      alert('File upload failed')\n    }\n  }\n  const createNewFolder = async () => {\n    const link = breadCumbLists[breadCumbLists.length - 1].link\n    const name: any = prompt('Enter Folder Name')\n    if (name && name !== '') {\n      const payload: CreateType = {\n        name,\n        type: 'FOLDER',\n        location: link,\n        file: ''\n      }\n      const response = await create(payload)\n      if (response?.status) {\n        alert('Folder Successfully created')\n      } else {\n        alert('Folder create failed')\n      }\n    }\n  }\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      }}\n    >\n      <Breadcrumb>\n        {breadCumbLists.map(({ title, link }: BreadCumbType, index: number) => {\n          return (\n            <Breadcrumb.Item key={`${title}-${index}-${link}`}>\n              <span\n                onClick={() => toggleBreadCumbIndex(index)}\n                style={{ cursor: 'pointer' }}\n              >\n                {title}\n              </span>\n            </Breadcrumb.Item>\n          )\n        })}\n      </Breadcrumb>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between'\n        }}\n      >\n        <Button icon={<PlusSquareOutlined />} onClick={() => createNewFolder()}>\n          Create Folder\n        </Button>\n        <div style={{ marginLeft: '10px' }} />\n        <Button\n          icon={<UploadOutlined />}\n          onClick={() => selectInputRef?.current?.click()}\n        >\n          Upload File\n        </Button>\n      </div>\n      <input\n        ref={selectInputRef}\n        type='file'\n        onChange={handleChangeFile}\n        style={{ display: 'none' }}\n      />\n    </div>\n  )\n}\n\nexport default ModalTitle\n","import { Button, Modal } from 'antd'\nimport * as React from 'react'\nimport {\n  useQuery,\n  QueryClient,\n  QueryClientProvider\n} from '@tanstack/react-query'\nimport 'antd/dist/antd.css'\nimport { Actions, BeautifyData } from './utilities/helper'\nimport { Loading } from './components'\nimport { Lists, ModalTitle } from './elements'\n// eslint-disable-next-line no-unused-vars\nimport { BreadCumbType, CreateType, listType } from './types'\n\ninterface ReactFileManagerProps {\n  visible: boolean\n  getList: (path: string) => Promise<any>\n  deletePath: (path: string) => Promise<any>\n  renamePath: (path: string, newFileName: string) => Promise<any>\n  create: (payload: CreateType) => Promise<any>\n  onClose: () => void\n  onCopy?: (path: string) => void\n}\nconst queryClient = new QueryClient()\nexport const ReactFileManager = ({\n  visible,\n  onClose,\n  getList,\n  renamePath,\n  deletePath,\n  create,\n  onCopy\n}: ReactFileManagerProps) => {\n  React.useLayoutEffect(() => {\n    Actions.set({ getList, deletePath, renamePath, onClose, create, onCopy })\n  }, [])\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Body {...{ visible }} key={`${visible}-file-manager-body`} />\n      <React.Fragment />\n    </QueryClientProvider>\n  )\n}\n\nconst Body = ({ visible }: { visible: boolean }) => {\n  const { getList, onClose }: any = Actions.get()\n  const [isVisible, setVisible] = React.useState<boolean>(visible)\n  const [breadCumbLists, setBreadCumbLists] = React.useState<\n    Array<BreadCumbType>\n  >([\n    {\n      title: 'Home',\n      link: '/'\n    }\n  ])\n  const [queryKey, setQueryKey] = React.useState<string>('/')\n  const { isLoading, data }: any = useQuery([queryKey], () => {\n    return visible ? getList(queryKey) : new Promise((resolve) => resolve(null))\n  })\n  const handleModalCancel = () => {\n    setVisible(false)\n    onClose()\n  }\n  const updateBreadBumbIndex = (title: string, link: string) => {\n    const newBread: any = [...breadCumbLists, { title, link }]\n    let path: string = ''\n    newBread.forEach((item: any, index: number) => {\n      if (index > 0) {\n        path += (index > 1 ? '/' : '') + item.title\n      }\n    })\n    setBreadCumbLists(newBread)\n    setQueryKey('/' + encodeURIComponent(path))\n  }\n  const toggleBreadCumbIndex = (index: number) => {\n    const filteredBreadCumb = breadCumbLists.filter((_, i) => i <= index)\n    let path: string = ''\n    filteredBreadCumb.forEach((item: any, index: number) => {\n      if (index > 0) {\n        path += (index > 1 ? '/' : '') + item.title\n      }\n    })\n    setBreadCumbLists(filteredBreadCumb)\n    setQueryKey('/' + encodeURIComponent(path))\n  }\n  const lists: listType[] = data ? BeautifyData(data) : []\n\n  return (\n    <Modal\n      visible={isVisible}\n      width='90%'\n      onCancel={handleModalCancel}\n      closable={false}\n      title={<ModalTitle {...{ breadCumbLists, toggleBreadCumbIndex }} />}\n      footer={[\n        <Button key='back' onClick={handleModalCancel}>\n          CLOSE\n        </Button>\n      ]}\n    >\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <Lists data={lists} {...{ updateBreadBumbIndex }} />\n      )}\n    </Modal>\n  )\n}\n"],"names":["GetFileNameFromLink","link","fileName","split","pop","IsImage","url","test","Actions","actions","set","get","CopyToClipboard","value","textArea","document","createElement","body","appendChild","select","execCommand","remove","BeautifyData","responseData","status","data","lists","map","list","title","type","console","error","Error","GetFileExtension","doc","substring","lastIndexOf","ContainerStyle","height","width","display","justifyContent","alignItems","Loading","React","style","Spin","size","styles","fontSize","color","Folder","FolderFilled","className","File","FileFilled","imageStyle","borderRadius","ImageFile","src","Image","alt","MenuOption","showRenameModal","Fragment","Dropdown","overlay","MenuItems","trigger","placement","fmItemMenuIcon","MoreOutlined","deletePath","onCopy","icon","CopyOutlined","label","key","EditOutlined","DeleteOutlined","onClick","Number","message","info","confirmation","confirm","Menu","items","FileFolderTitle","Typography","Paragraph","ellipsis","rows","margin","padding","lineHeight","fontWeight","textAlign","RenameModal","details","setRenameDetails","inputRef","useRef","renamePath","_show","ext","replace","useState","confirmLoading","setConfirmLoading","handleOk","current","handleCancel","Modal","visible","onOk","onCancel","Input","addonAfter","defaultValue","autoFocus","onChange","e","currentTarget","Lists","updateBreadBumbIndex","renameDetails","List","grid","gutter","xs","sm","md","lg","xl","xxl","dataSource","renderItem","Item","fmItem","fmItemContainer","cursor","ModalTitle","toggleBreadCumbIndex","breadCumbLists","selectInputRef","create","handleChangeFile","event","length","file","target","files","fileExtension","payload","name","location","response","alert","createNewFolder","prompt","flexDirection","Breadcrumb","index","Button","PlusSquareOutlined","marginLeft","UploadOutlined","click","ref","queryClient","QueryClient","ReactFileManager","onClose","getList","QueryClientProvider","client","Body","isVisible","setVisible","setBreadCumbLists","queryKey","setQueryKey","useQuery","Promise","resolve","isLoading","handleModalCancel","newBread","path","forEach","item","encodeURIComponent","filteredBreadCumb","filter","_","i","closable","footer"],"mappings":"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"}