{"version":3,"file":"index.js","sources":["../src/utilities/helper.ts","../src/components/loading.tsx","../src/components/folder.tsx","../src/components/file.tsx","../src/components/image.tsx","../src/components/menu.tsx","../src/components/title.tsx","../src/components/renamemodal.tsx","../src/elements/lists.tsx","../src/elements/modaltitle.tsx","../src/index.tsx"],"sourcesContent":["export function GetFileNameFromLink(link: string) {\n  const fileName = link.split('/').pop()\n  return fileName\n}\nexport function IsImage(url: string) {\n  return /\\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(url)\n}\nexport const Actions = {\n  actions: {},\n  set(actions: any) {\n    this.actions = actions\n  },\n  get() {\n    return this.actions\n  }\n}\nexport function CopyToClipboard(value: any) {\n  const textArea = document.createElement('textarea')\n  textArea.value = value\n  document.body.appendChild(textArea)\n  textArea.select()\n  document.execCommand('copy')\n  textArea.remove()\n}\nexport function BeautifyData(responseData: any) {\n  const { status, data } = responseData\n  let lists = []\n  if (status) {\n    lists = data.map((list: any) => {\n      return {\n        ...list,\n        title:\n          list.type === 'folder' ? list.title : GetFileNameFromLink(list.link),\n        type: IsImage(list.link) ? 'image' : list.type\n      }\n    })\n  } else {\n    console.error(responseData)\n    throw Error('Failed to retrieve data')\n  }\n  return lists\n}\nexport function GetFileExtension(link: string) {\n  var doc = link.substring(link.lastIndexOf('/'))\n  return doc.substring(doc.lastIndexOf('.'))\n}\n","import { Spin } from 'antd'\nimport React from 'react'\n\nconst ContainerStyle = {\n  height: '200px',\n  width: '100%',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n}\nexport default function Loading() {\n  return (\n    <div style={ContainerStyle}>\n      <Spin size='large' />\n    </div>\n  )\n}\n","import React from 'react'\nimport { FolderFilled } from '@ant-design/icons'\n\nconst styles = {\n  fontSize: 50,\n  color: '#3399ff'\n}\nexport default function Folder() {\n  return <FolderFilled style={styles} className='fm-item-icon' />\n}\n","import React from 'react'\nimport { FileFilled } from '@ant-design/icons'\n\nconst styles = {\n  fontSize: 35,\n  color: '#fa7125'\n}\nexport default function File() {\n  return <FileFilled style={styles} className='fm-item-icon' />\n}\n","import { Image } from 'antd'\nimport React from 'react'\n\nconst imageStyle = {\n  borderRadius: '4px'\n}\nexport default function ImageFile({ src }: { src: string }) {\n  return (\n    <div>\n      <Image style={imageStyle} width={65} height={50} src={src} alt='' />\n    </div>\n  )\n}\n","import {\n  CopyOutlined,\n  // EditOutlined,\n  MoreOutlined,\n  DeleteOutlined\n} from '@ant-design/icons'\nimport { Dropdown, Menu, message } from 'antd'\nimport React from 'react'\nimport styles from '../styles.module.css'\n// import { DeleteFileFolder } from '../utilities/apicalls'\nimport { Actions, CopyToClipboard } from '../utilities/helper'\n\nconst MenuOption = ({\n  type,\n  link,\n  showRenameModal,\n  prefix,\n  refetch\n}: {\n  type: string\n  link: string\n  showRenameModal: (data: any) => void\n  refetch: any\n  prefix: string\n}) => {\n  return (\n    <React.Fragment>\n      <Dropdown\n        overlay={() => (\n          <MenuItems {...{ type, link, prefix, refetch, showRenameModal }} />\n        )}\n        trigger={['click']}\n        placement='bottomRight'\n      >\n        <div className={styles.fmItemMenuIcon}>\n          <MoreOutlined />\n        </div>\n      </Dropdown>\n    </React.Fragment>\n  )\n}\nconst MenuItems = ({\n  type,\n  link,\n  showRenameModal,\n  prefix,\n  refetch\n}: {\n  type: string\n  link: string\n  showRenameModal: any\n  prefix: string\n  refetch: any\n}) => {\n  const { deletePath, onCopy }: any = Actions.get()\n  let lists = [\n    {\n      icon: <CopyOutlined />,\n      label: 'Copy',\n      key: 0\n    },\n    // {\n    //   icon: <EditOutlined />,\n    //   label: 'Rename',\n    //   key: 1\n    // },\n    {\n      icon: <DeleteOutlined />,\n      label: 'Delete',\n      key: 2\n    }\n  ]\n  if (type === 'folder') {\n    // delete lists[0]\n    // delete lists[2]\n    lists = []\n  }\n  const onClick = async ({ key }: any) => {\n    if (Number(key) === 0) {\n      if (onCopy) {\n        onCopy(link)\n      }\n      CopyToClipboard(link)\n      message.info('Copied to clipboard')\n    }\n    if (Number(key) === 2) {\n      const confirmation = confirm('Are you sure you want to remove ?')\n      if (confirmation) {\n        alert(prefix)\n        await deletePath(prefix)\n        setTimeout(() => {\n          refetch()\n        }, 1000)\n      }\n    }\n    if (Number(key) === 1) {\n      showRenameModal()\n    }\n  }\n  return <Menu items={lists} onClick={onClick} />\n}\n\nexport default MenuOption\n","import React from 'react'\nimport { Typography } from 'antd'\nconst FileFolderTitle = ({ title }: { title: string }) => {\n  return (\n    <Typography.Paragraph\n      title={title}\n      ellipsis={{ rows: 1 }}\n      style={{\n        margin: 0,\n        height: 30,\n        padding: '4px 6px',\n        fontSize: 12,\n        lineHeight: '22px',\n        fontWeight: 500,\n        textAlign: 'center'\n      }}\n    >\n      {title}\n    </Typography.Paragraph>\n  )\n}\n\nexport default FileFolderTitle\n","import { Input, Modal } from 'antd'\nimport React, { useRef, useState } from 'react'\nimport { Actions, GetFileExtension } from '../utilities/helper'\n\nconst RenameModal = ({\n  details,\n  setRenameDetails\n}: {\n  details: any\n  setRenameDetails: any\n}) => {\n  const inputRef: any = useRef(null)\n  const { renamePath }: any = Actions.get()\n  const { _show, data } = details\n  const { type, title, link } = data\n  const ext = type === 'image' || type === 'file' ? GetFileExtension(title) : ''\n  const fileName = data?.title.replace(ext, '')\n  const [confirmLoading, setConfirmLoading] = useState(false)\n  const handleOk = async () => {\n    const confirmation = confirm('Are you sure you want to rename ?')\n    if (!confirmation) return\n    setConfirmLoading(true)\n    await renamePath(link, `${inputRef.current}${ext}`)\n    setRenameDetails({ _show: false, data: {} })\n    setConfirmLoading(false)\n  }\n\n  const handleCancel = () => {\n    setRenameDetails({ _show: false, data: {} })\n  }\n\n  return (\n    <Modal\n      title='Rename'\n      visible={_show}\n      onOk={handleOk}\n      confirmLoading={confirmLoading}\n      onCancel={handleCancel}\n    >\n      <Input\n        addonAfter={ext}\n        defaultValue={fileName}\n        autoFocus\n        onChange={(e) => (inputRef.current = e.currentTarget.value)}\n      />\n    </Modal>\n  )\n}\n\nexport default RenameModal\n","import React, { useState } from 'react'\nimport { List } from 'antd'\nimport {\n  File,\n  FileFolderTitle,\n  Folder,\n  ImageFile,\n  MenuOption,\n  RenameModal\n} from '../components'\n// eslint-disable-next-line no-unused-vars\nimport { listType } from '../types'\nimport styles from '../styles.module.css'\n\ninterface ListProps {\n  data: listType[]\n  updateBreadBumbIndex: (title: string, link: string) => void\n  refetch: any\n}\nexport default function Lists({\n  data,\n  refetch,\n  updateBreadBumbIndex\n}: ListProps) {\n  const [renameDetails, setRenameDetails] = useState<{\n    _show: boolean\n    data: {\n      title?: string\n      link?: string\n      type?: string\n    }\n  }>({\n    _show: false,\n    data: {}\n  })\n  function showRenameModal(data: any) {\n    setRenameDetails({ _show: true, data })\n  }\n  return (\n    <React.Fragment>\n      <List\n        grid={{\n          gutter: 16,\n          xs: 3,\n          sm: 4,\n          md: 5,\n          lg: 6,\n          xl: 8,\n          xxl: 9\n        }}\n        dataSource={data}\n        renderItem={({ type, title, prefix, link }: any) => (\n          <List.Item>\n            <div className={styles.fmItem}>\n              <div className={styles.fmItemContainer}>\n                {type === 'folder' ? (\n                  <span\n                    onClick={() => updateBreadBumbIndex(title, prefix)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    <Folder />\n                  </span>\n                ) : type === 'file' ? (\n                  <File />\n                ) : (\n                  <div>\n                    <ImageFile src={link} />\n                  </div>\n                )}\n              </div>\n              <MenuOption\n                {...{ type, link, prefix, refetch }}\n                showRenameModal={() => showRenameModal({ type, title, link })}\n              />\n              <FileFolderTitle {...{ title }} />\n            </div>\n          </List.Item>\n        )}\n      />\n      {renameDetails?._show ? (\n        <RenameModal\n          details={renameDetails}\n          key={`${renameDetails?._show}-rename-modal`}\n          setRenameDetails={setRenameDetails}\n        />\n      ) : (\n        <React.Fragment />\n      )}\n    </React.Fragment>\n  )\n}\n","import { Breadcrumb, Button } from 'antd'\nimport React, { useRef } from 'react'\nimport { PlusSquareOutlined, UploadOutlined } from '@ant-design/icons'\n// eslint-disable-next-line no-unused-vars\nimport { BreadCumbType, CreateType } from '../types'\nimport { Actions } from '../utilities/helper'\n\ninterface ModalTitleProps {\n  breadCumbLists: BreadCumbType[]\n  toggleBreadCumbIndex: (index: number) => void\n  refetch: any\n}\nconst ModalTitle = ({\n  toggleBreadCumbIndex,\n  breadCumbLists,\n  refetch\n}: ModalTitleProps) => {\n  const selectInputRef: any = useRef(null)\n  const { create }: any = Actions.get()\n\n  const handleChangeFile = async (event: any) => {\n    const link = breadCumbLists[breadCumbLists.length - 1].link\n    const file = event.target.files[0]\n    const fileExtension = file?.type.split('/')[1]\n    const payload: CreateType = {\n      name: file?.name.replace('.' + fileExtension, ''),\n      type: 'FILE',\n      location: link,\n      file: file\n    }\n    const response = await create(payload)\n    if (response?.status) {\n      alert('File Successfully uploaded')\n      refetch()\n    } else {\n      alert('File upload failed')\n    }\n  }\n  const createNewFolder = async () => {\n    const link = breadCumbLists[breadCumbLists.length - 1].link\n    const name: any = prompt('Enter Folder Name')\n    if (name && name !== '') {\n      const payload: CreateType = {\n        name,\n        type: 'FOLDER',\n        location: link,\n        file: ''\n      }\n      const response = await create(payload)\n      if (response?.status) {\n        alert('Folder Successfully created')\n        refetch()\n      } else {\n        alert('Folder create failed')\n      }\n    }\n  }\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      }}\n    >\n      <Breadcrumb>\n        {breadCumbLists.map(({ title, link }: BreadCumbType, index: number) => {\n          return (\n            <Breadcrumb.Item key={`${title}-${index}-${link}`}>\n              <span\n                onClick={() => toggleBreadCumbIndex(index)}\n                style={{ cursor: 'pointer' }}\n              >\n                {title}\n              </span>\n            </Breadcrumb.Item>\n          )\n        })}\n      </Breadcrumb>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between'\n        }}\n      >\n        <Button icon={<PlusSquareOutlined />} onClick={() => createNewFolder()}>\n          Create Folder\n        </Button>\n        <div style={{ marginLeft: '10px' }} />\n        <Button\n          icon={<UploadOutlined />}\n          onClick={() => selectInputRef?.current?.click()}\n        >\n          Upload File\n        </Button>\n      </div>\n      <input\n        ref={selectInputRef}\n        type='file'\n        onChange={handleChangeFile}\n        style={{ display: 'none' }}\n      />\n    </div>\n  )\n}\n\nexport default ModalTitle\n","import { Button, Modal } from 'antd'\nimport * as React from 'react'\nimport {\n  useQuery,\n  QueryClient,\n  QueryClientProvider\n} from '@tanstack/react-query'\nimport 'antd/dist/antd.css'\nimport { Actions, BeautifyData } from './utilities/helper'\nimport { Loading } from './components'\nimport { Lists, ModalTitle } from './elements'\n// eslint-disable-next-line no-unused-vars\nimport { BreadCumbType, CreateType, listType } from './types'\n\ninterface ReactFileManagerProps {\n  visible: boolean\n  getList: (path: string) => Promise<any>\n  deletePath: (path: string) => Promise<any>\n  renamePath: (path: string, newFileName: string) => Promise<any>\n  create: (payload: CreateType) => Promise<any>\n  onClose: () => void\n  onCopy?: (path: string) => void\n}\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false\n    }\n  }\n})\nexport const ReactFileManager = ({\n  visible,\n  onClose,\n  getList,\n  renamePath,\n  deletePath,\n  create,\n  onCopy\n}: ReactFileManagerProps) => {\n  React.useLayoutEffect(() => {\n    Actions.set({ getList, deletePath, renamePath, onClose, create, onCopy })\n  }, [])\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Body {...{ visible }} key={`${visible}-file-manager-body`} />\n      <React.Fragment />\n    </QueryClientProvider>\n  )\n}\n\nconst Body = ({ visible }: { visible: boolean }) => {\n  const { getList, onClose }: any = Actions.get()\n  const [isVisible, setVisible] = React.useState<boolean>(visible)\n  const [breadCumbLists, setBreadCumbLists] = React.useState<\n    Array<BreadCumbType>\n  >([\n    {\n      title: 'Home',\n      link: '/'\n    }\n  ])\n  const [queryKey, setQueryKey] = React.useState<string>('/')\n  const { isLoading, data, refetch }: any = useQuery(\n    [queryKey],\n    () => {\n      return visible\n        ? getList(queryKey)\n        : new Promise((resolve) => resolve(null))\n    },\n    {\n      enabled: false\n    }\n  )\n  React.useEffect(() => {\n    visible && refetch()\n  }, [visible, queryKey])\n  const handleModalCancel = () => {\n    setVisible(false)\n    onClose()\n  }\n  const updateBreadBumbIndex = (title: string, link: string) => {\n    console.log({ title }, { link })\n    const newBread: any = [...breadCumbLists, { title, link }]\n    let path: string = ''\n    newBread.forEach((item: any, index: number) => {\n      if (index > 0) {\n        path += (index > 1 ? '/' : '') + item.title\n      }\n    })\n    setQueryKey('/' + encodeURIComponent(path))\n    setBreadCumbLists(newBread)\n  }\n  const toggleBreadCumbIndex = (index: number) => {\n    const filteredBreadCumb = breadCumbLists.filter((_, i) => i <= index)\n    let path: string = ''\n    filteredBreadCumb.forEach((item: any, index: number) => {\n      if (index > 0) {\n        path += (index > 1 ? '/' : '') + item.title\n      }\n    })\n    setBreadCumbLists(filteredBreadCumb)\n    setQueryKey('/' + encodeURIComponent(path))\n  }\n  const lists: listType[] = data ? BeautifyData(data) : []\n\n  return (\n    <Modal\n      visible={isVisible}\n      width='90%'\n      onCancel={handleModalCancel}\n      closable={false}\n      title={\n        <ModalTitle {...{ breadCumbLists, refetch, toggleBreadCumbIndex }} />\n      }\n      footer={[\n        <Button key='back' onClick={handleModalCancel}>\n          CLOSE\n        </Button>\n      ]}\n    >\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <Lists data={lists} {...{ refetch, updateBreadBumbIndex }} />\n      )}\n    </Modal>\n  )\n}\n"],"names":["GetFileNameFromLink","link","fileName","split","pop","IsImage","url","test","Actions","actions","set","get","CopyToClipboard","value","textArea","document","createElement","body","appendChild","select","execCommand","remove","BeautifyData","responseData","status","data","lists","map","list","title","type","console","error","Error","GetFileExtension","doc","substring","lastIndexOf","ContainerStyle","height","width","display","justifyContent","alignItems","Loading","React","style","Spin","size","styles","fontSize","color","Folder","FolderFilled","className","File","FileFilled","imageStyle","borderRadius","ImageFile","src","Image","alt","MenuOption","showRenameModal","prefix","refetch","Fragment","Dropdown","overlay","MenuItems","trigger","placement","fmItemMenuIcon","MoreOutlined","deletePath","onCopy","icon","CopyOutlined","label","key","DeleteOutlined","onClick","Number","message","info","confirmation","confirm","alert","setTimeout","Menu","items","FileFolderTitle","Typography","Paragraph","ellipsis","rows","margin","padding","lineHeight","fontWeight","textAlign","RenameModal","details","setRenameDetails","inputRef","useRef","renamePath","_show","ext","replace","useState","confirmLoading","setConfirmLoading","handleOk","current","handleCancel","Modal","visible","onOk","onCancel","Input","addonAfter","defaultValue","autoFocus","onChange","e","currentTarget","Lists","updateBreadBumbIndex","renameDetails","List","grid","gutter","xs","sm","md","lg","xl","xxl","dataSource","renderItem","Item","fmItem","fmItemContainer","cursor","ModalTitle","toggleBreadCumbIndex","breadCumbLists","selectInputRef","create","handleChangeFile","event","length","file","target","files","fileExtension","payload","name","location","response","createNewFolder","prompt","flexDirection","Breadcrumb","index","Button","PlusSquareOutlined","marginLeft","UploadOutlined","click","ref","queryClient","QueryClient","defaultOptions","queries","refetchOnWindowFocus","ReactFileManager","onClose","getList","QueryClientProvider","client","Body","isVisible","setVisible","setBreadCumbLists","queryKey","setQueryKey","useQuery","Promise","resolve","enabled","isLoading","handleModalCancel","log","newBread","path","forEach","item","encodeURIComponent","filteredBreadCumb","filter","_","i","closable","footer"],"mappings":"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"}